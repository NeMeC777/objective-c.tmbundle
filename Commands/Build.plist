<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>beforeRunningCommand</key>
	<string>saveModifiedFiles</string>
	<key>command</key>
	<string># this command calls xcodebuild giving the name of the project
# directory as the project to build and parses the output for
# file/line information then plays a succes/failure sample
# based on the final outcome

# you may wish to change these two variables:
PROJECT_FILE="`basename $TM_PROJECT_DIRECTORY`.xcode"
BUILD_STYLE="Deployment"

echo '&lt;tt&gt;'
res=`mktemp /tmp/build_status_XXX`

xcodebuild 2&gt;${res} -project $PROJECT_FILE -buildstyle $BUILD_STYLE \
| perl -pe '$| = 1; s/^(([^:]*\/)?([^\/:]+)):((\d+):)?/&lt;a href="txmt:\/\/open?url=file:\/\/$1&amp;line=$5"&gt;$3&lt;\/a&gt;:/; s/\n/&lt;br&gt;\n/'

echo '&lt;h2&gt;' "$(&lt; ${res})" '&lt;/h2&gt;'

cd "${TM_BUNDLE_PATH}"
if [[ "$(&lt; ${res})" == "** BUILD SUCCEEDED **" ]]
 then bin/play Sounds/Harp.wav    &amp;&gt;/dev/null &amp;
 else bin/play Sounds/Whistle.wav &amp;&gt;/dev/null &amp;
fi

rm ${res}</string>
	<key>input</key>
	<string>none</string>
	<key>keyEquivalent</key>
	<string>@b</string>
	<key>name</key>
	<string>Build (using xcodebuild)</string>
	<key>output</key>
	<string>showAsHTML</string>
	<key>uuid</key>
	<string>9656317E-73EB-11D9-9848-000D93589AF6</string>
</dict>
</plist>
